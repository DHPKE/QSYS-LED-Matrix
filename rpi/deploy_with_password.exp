#!/usr/bin/expect -f
set timeout 30

# Copy file to RPi
spawn scp text_renderer.py pi@10.1.1.10:/tmp/
expect "password:"
send "node\r"
expect eof

# Move file and restart service
spawn ssh pi@10.1.1.10 "sudo mv /tmp/text_renderer.py /opt/led-matrix/ && sudo systemctl restart led-matrix && sleep 3 && sudo systemctl status led-matrix --no-pager"
expect "password:"
send "node\r"
expect eof
